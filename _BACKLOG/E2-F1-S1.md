# E2-F1-S1 Statsig-powered navigation analytics and performance tracing hooks

## User Story

As a product analytics owner, I want navigation and performance events reported through Statsig so that I can track funnels, AB tests, and web vitals without adding per-view instrumentation later.

## Related Epic

- [E2](./E2.md) – Observability, analytics, and resilience epic.

## Related Feature

- [E2-F1](./E2-F1.md) – Analytics and performance tracing feature.

## Scope

- Add Statsig client initialization with environment-derived SDK keys and app metadata.
- Instrument Vue Router `afterEach` to emit page views and navigation timing to Statsig, including route names/ids and auth state where available.
- Capture core web vitals (LCP, FID, CLS, TTFB) and send to Statsig for performance analytics.
- Ensure instrumentation is resilient: non-blocking initialization, graceful handling when Statsig is unavailable, and opt-out paths for local/dev builds.

## Acceptance Criteria

- Statsig SDK is initialized once during app startup using non-hardcoded keys from configuration, with typings and basic error handling.
- Router navigation events are recorded to Statsig with route identifiers and durations without exposing PII; events continue to fire after client-side redirects.
- Web vitals are captured and forwarded to Statsig; metrics include page url/route context and are sampled or throttled to avoid noise.
- Instrumentation can be disabled in local/dev builds via configuration flags; failures to reach Statsig do not block rendering.
- Unit and/or integration coverage demonstrates that navigation hooks and vitals emit expected payload shapes when enabled.

## Notes

- Reuse a single Statsig client instance; avoid duplicating initialization across modules.
- Leave room for future enrichment (user id/traits) once authentication is in place.
