# E3-F5-S2 Context menu shortcuts and clipboard exports for colors and SVG

## User Story

As a product designer, I want quick clipboard actions for hovered colors and AA/AAA pairs, including SVG export, so I can paste assets into design tools.

## Related Epic

- [E3](./E3.md) – Tonal scale builder migration epic.

## Related Feature

- [E3-F5](./E3-F5.md) – Accessibility helpers, clipboard, and sharing utilities feature.

## Scope

- Implement a custom context menu triggered on right-click over scale strips offering copy actions for hovered color and nearest AA/AAA pairs.
- Add a “Copy SVG” action that captures visible scale strips (with URL and export JSON metadata) and writes to the clipboard.
- Provide visual feedback/toasts for successful copies and guard invalid states.
- Rebuild clipboard flows so they consume reactive tonal state and virtualization outputs rather than scraping the DOM and globals as in the prototype implementation. (`temp/src/js/index.js` L823-L895, `temp/src/js/index.js` L127-L159)

## Acceptance Criteria

- Right-clicking a swatch opens a menu with copy actions for the hovered color and AA/AAA pairs; selecting an option copies the hex value with confirmation feedback.
- Copy SVG generates an SVG containing all visible strips plus metadata and places it on the clipboard without blocking the UI.
- Clipboard operations gracefully handle unsupported browsers/permissions with user feedback.
- Tests (or documented manual steps) confirm color copy, pair copy, and SVG copy behaviors for representative scales.
- Context menu and copy routines read from store data and component refs, keeping clipboard utilities framework-driven instead of manual DOM traversal.

## Notes

- Maintain the same menu entries, feedback, and export payloads used in the `temp/` app; rebuild with Tailwind/Headless UI but keep functionality 1:1.
- Use Floating UI to position the context menu. The menu should never be partially visible when opening ; it should be repositioned to be fully visible.
- Make a primitive context menu component that can be used in other places. It's content must be passed as a slot. We must be able to control if clicking an element inside the menu should close it or not. We must be able to control if the menu should be closed on outside click/blur or not. We must be able to control if the menu should be closed on browser events (scroll, resize, keydown, etc.) or not. The menu should be closed on escape keydown. We must be able to control if the menu scrolls with the page or not. The menu should open at the cursor position. We should be able to open the menu programatically. We should be able to close the menu programatically. The menu must be closed if another context menu is opened. We must be able to open a context menu when one is already open (ie open a new one, close the old one).
