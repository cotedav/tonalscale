# E2-F2-S2 User-facing PWA update and offline notifications

## User Story

As a member user, I want clear notifications when the app goes offline or a new version is available so that I can refresh confidently and understand limited functionality during outages.

## Related Epic

- [E2](./E2.md) – Observability, analytics, and resilience epic.

## Related Feature

- [E2-F2](./E2-F2.md) – Resilience and offline experience feature.

## Scope

- Replace console logs in the PWA registration helper with a UI pattern (e.g., global snackbar/toast) for update availability, update applied, and offline-ready states.
- Provide a refresh action that triggers the waiting service worker to activate and reload the app when the user accepts the update.
- Ensure offline readiness messaging appears when caching is ready and degrades gracefully when service workers are unsupported.
- Localize all user-visible strings and ensure the UX is accessible (ARIA labels, focus behavior).

## Acceptance Criteria

- Service worker lifecycle events (waiting, activated, offline) surface user-visible notifications instead of console-only messaging.
- Users can trigger an immediate refresh when an update is available; after acceptance, the new version is activated and the app reloads.
- Offline-ready state is communicated once caching is prepared; when unsupported, no errors leak to the UI and messaging is suppressed appropriately.
- All strings are routed through i18n dictionaries and notifications meet accessibility requirements (announcements, dismiss controls).
- Tests cover the notification logic for update and offline scenarios, including the refresh action path.

## Notes

- Keep the notification mechanism reusable so other system-level alerts (e.g., maintenance) can reuse it later.
