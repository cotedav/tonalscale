# E3-F6-S1 Light/dark theme toggle with persisted preference and animated iconography

## User Story

As a user, I want to toggle between light and dark themes with smooth icon transitions so the tonal builder matches my workspace preferences.

## Related Epic

- [E3](./E3.md) – Tonal scale builder migration epic.

## Related Feature

- [E3-F6](./E3-F6.md) – Theming, responsiveness, and UX polish feature.

## Scope

- Implement a theme toggle control that updates Tailwind color variables and persists the preference in localStorage.
- Mirror prototype behavior with animated icon transitions and picker/styling adjustments per theme.
- Ensure components (pickers, strips, cards, modals, context menu) respond to theme changes without reloads.
- Provide accessible labeling and focus handling for the toggle.
- Avoid direct DOM manipulation like `document.body.classList` and timeouts for transitions; centralize theme state in a composable/store that components subscribe to, eliminating implicit coupling across files.【F:temp/src/js/index.js†L23-L35】【F:temp/src/js/index.js†L285-L304】

## Acceptance Criteria

- Theme toggle switches the entire tonal builder between light and dark palettes with smooth icon animation.
- Theme preference persists across reloads; initial load respects saved preference or system default.
- Pickers, scale strips, color cards, modals, and context menu adopt correct theme variables without visual glitches.
- Tests or documented manual steps verify persistence and component restyling under both themes.
- Theme propagation is reactive and framework-driven; no feature relies on manipulating global classes or timing hacks to restyle child components.

## Notes

- Preserve the theme behaviors and persistence semantics from the `temp/` app exactly while reimplementing with Tailwind/Headless UI.
