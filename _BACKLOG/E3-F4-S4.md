# E3-F4-S4 Optional blend distribution visualization with Plotly overlay controls

## User Story

As a visual designer, I want an optional Plotly overlay showing the blend distribution curve so I can understand how strength, peak, and spread affect the tonal ramp.

## Related Epic

- [E3](./E3.md) – Tonal scale builder migration epic.

## Related Feature

- [E3-F4](./E3-F4.md) – Scale visualization and interaction patterns feature.

## Scope

- Integrate Plotly (or a lightweight alternative) to display the active blend distribution curve aligned with the full tonal strip.
- Render the overlay automatically while the user adjusts the blend peak/spread sliders (mousedown/input) on containers marked `showBlendDistGraph="true"`; purge it on mouseup, mirroring the transient behavior in `temp/` rather than adding a manual toggle.
- Update the plot reactively when blend parameters change during interaction, matching prototype behavior.
- Ensure the overlay is accessible (announce when shown), unobtrusive, and styled to avoid obscuring scale content.
- Keep the overlay renderer independent of DOM querying and global `State` mutations seen in the prototype; subscribe to composable data and slider events instead of reaching into `document` to add/purge graphs.【F:temp/src/js/index.js†L187-L266】【F:temp/src/js/index.js†L433-L520】

## Acceptance Criteria

- On containers flagged with `showBlendDistGraph="true"`, a Plotly (or equivalent) chart renders above the full strip while the user is interacting with the peak/spread sliders (e.g., mousedown/input) and is removed on mouseup, matching the transient overlay behavior in `temp/`.
- The overlay reflects current blend peak/spread/strength values and disappears immediately after interaction ends without altering the tonal strip state.
- Parameter changes during interaction update the plot in real time with debounced rendering to maintain performance.
- Tests (or documented manual steps) verify the transient overlay appearance/removal, parameter-driven updates, and adherence to the `showBlendDistGraph` attribute gate.
- Overlay lifecycle is driven by reactive state and event handlers rather than manual DOM cleanup, preventing leakage when the component unmounts.

## Notes

- Keep overlay data, toggles, and responsiveness aligned with the `temp/` implementation; only the tech stack changes to Tailwind/Headless UI plus Plotly.
