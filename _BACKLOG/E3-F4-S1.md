# E3-F4-S1 Baseline tonal scale generation without blend color

## User Story

As a UI engineer, I want the tonal engine to build three 0–100 scales from a chosen base color without any blend color influence so the ramp runs smoothly from black through the base color to white.

## Related Epic

- [E3](./E3.md) – Tonal scale builder migration epic.

## Related Feature

- [E3-F4](./E3-F4.md) – Scale visualization and interaction patterns feature.

## Scope

- Accept a base color input and compute its LAB lightness (`L`) to anchor where the unblended base swatch sits on a 0–100 scale.
- For every index 0–100, set LAB lightness to the index value and linearly reduce chroma (a/b channels) the farther the step is from the base lightness so the hue naturally desaturates toward black (0) and white (100).【F:temp/src/js/index.js†L440-L514】
- Convert each LAB step back to RGB/hex to form the canonical 101-step scale; when blend strength is 0 and saturation controls are 0, skip all blend and saturation adjustments so the scale reflects only the LAB ramp.【F:temp/src/js/index.js†L490-L510】【F:temp/src/js/utils/color.js†L177-L240】
- Derive three arrays (full, extended key, key) from this canonical scale, ensuring the base lightness index is always included so the base color remains visible in each strip.【F:temp/src/js/index.js†L557-L570】
- Document the no-blend defaults (Blend Strength: 0, Blend Peak: 0, Blend Spread: 50, Saturation Darker: 0, Saturation Lighter: 0) and defer any blend-color implementation for a future story.

## Acceptance Criteria

- Providing a base color yields three tonal scales that start at pure black (index 0), pass through the base color at its LAB lightness index, and end at pure white (index 100) without any blend color applied.
- Chroma falls off proportionally on both sides of the base color, producing natural desaturation near the ends of the scale.
- Full, extended key, and key arrays stay in sync with the canonical scale and always contain the base color slot.
- Blend color input exists in the UI but is inert for this story; enabling blend effects is explicitly out of scope.
- Unit tests cover the unblended scale generation logic, verifying LAB anchoring, chroma falloff, and base-color inclusion across all three arrays.
