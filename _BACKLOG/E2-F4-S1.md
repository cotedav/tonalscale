# E2-F4-S1 CI health instrumentation for performance and PWA quality

## User Story

As a delivery lead, I want CI to track bundle health and PWA quality so that regressions in performance or offline readiness are caught before reaching users.

## Related Epic

- [E2](./E2.md) – Observability, analytics, and resilience epic.

## Related Feature

- [E2-F4](./E2-F4.md) – Delivery health instrumentation feature.

## Scope

- Add automated bundle size checks/budgets to CI with clear thresholds and failure messaging.
- Introduce a lightweight Lighthouse or equivalent PWA smoke test in CI covering performance, accessibility, best practices, and PWA categories.
- Capture and publish metrics artifacts (reports, budgets) for each run to aid trend analysis.
- Document how to update thresholds and interpret failures.

## Acceptance Criteria

- CI fails when bundle sizes exceed defined budgets; reports indicate which chunks/assets breached limits.
- Lighthouse (or similar) smoke tests run in CI with reproducible configuration and produce artifacts (JSON/HTML) stored as build outputs.
- Developers can adjust budgets and test parameters via version-controlled configuration with documented steps.
- CI logs clearly describe how to address failures; no additional manual setup is required beyond repository dependencies.

## Notes

- Prefer headless runs suitable for CI environments; keep runtime under reasonable limits to avoid pipeline slowdowns.
